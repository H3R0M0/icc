{% extends "main.html.twig" %}

{% block title %}{{ 'lists.privacy.label'|trans }}{% endblock %}

{% block breadcrumb %}
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{{ path('dashboard') }}">{{ 'dashboard.label'|trans }}</a></li>
        <li class="breadcrumb-item">{{ block('title') }}</li>
    </ol>
{% endblock %}

{% block content %}
    <div class="container-fluid px-0">
        <div class="row">
            <div class="col-md-9">
                <div class="card">
                    <table class="table table-striped table-bordered table-hover">
                        <colgroup>
                            <col>
                            {% for category in categories %}
                            <col class="column-md">
                            {% endfor %}
                        </colgroup>

                        <thead>
                        <tr>
                            <th>{{ 'label.student'|trans }}</th>
                            {% for category in categories %}
                                <th>{{ category.label }}</th>
                            {% endfor %}
                        </tr>
                        </thead>
                        <tbody>
                        {% for student in students %}
                            <tr class="{% if student.approvedPrivacyCategories|length == categories|length %}table-success{% else %}table-warning{% endif %}">
                                <td>{{ student|student }}</td>
                                {% for category in categories %}
                                <td>
                                    {% if category in student.approvedPrivacyCategories %}
                                        <i class="fa fa-check"></i>
                                    {% else %}
                                        <i class="fa fa-times"></i>
                                    {% endif %}
                                </td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                    {% if students|length == 0 %}
                    <div class="card-body">
                        {% if isStart %}
                            <p>{{ 'lists.privacy.start'|trans }}</p>
                        {% else %}
                            <p>{{ 'lists.privacy.empty'|trans }}</p>
                        {% endif %}
                    </div>
                    {% endif %}
                </div>

                <div class="card">
                    <div class="card-header">{{ 'lists.privacy.explanations'|trans }}</div>

                    <div class="list-group list-group-flush">
                        {% for category in categories %}
                        <div class="list-group-item">
                            <h6 class="mb-1">{{ category.label }}</h6>
                            <p class="text-justify">{{ category.description }}</p>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>

            <div class="col-md-3">
                <div class="card">
                    <div class="card-body">
                        {% include "_filter/study_group.html.twig" %}

                        {% include "_filter/query.html.twig" with { route: 'list_privacy', params: { } } %}
                    </div>

                    <div class="card-footer">
                        <a href="{{ path('list_privacy') }}" class="btn btn-primary btn-sm">{{ 'filter.reset'|trans }}</a>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <h5><i class="fa fa-info-circle"></i> {{ 'info.label'|trans }}</h5>

                        <p>{{ 'lists.privacy.info'|trans }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}