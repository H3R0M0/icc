{% extends "main.html.twig" %}

{% block title %}{{ 'plans.rooms.label'|trans }}{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">{{ 'plans.rooms.filter.label'|trans }}</h5>

            <form method="post" role="form">
                <div class="form-inline">
                    <input class="form-check-input" type="checkbox" id="check-name" name="name" {% if query.hasName() %} checked{% endif %} />

                    <label class="form-check-label" for="check-name">
                        {{ 'plans.rooms.filter.name.label'|trans }}:
                        <input type="text" name="name-value" class="form-control input-sm" value="{{ query.getName() }}" data-enable="#check-name" />

                        <i class="fa fa-info-circle" title="{{ 'plans.rooms.filter.name.help'|trans }}" data-toggle="tooltip"></i>
                    </label>
                </div>
                <div class="form-inline">
                    <input class="form-check-input" type="checkbox" id="check-seats" name="seats" {% if query.hasSeats() %} checked{% endif %} />

                    <label class="form-check-label" for="check-seats">
                        {{ 'plans.rooms.seats'|trans }}:

                        <input type="number" min="0" name="seats-value" class="form-control input-sm" value="{{ query.getSeatsValueOrDefault() }}" data-enable="#check-seats" />
                        <i class="fa fa-info-circle" title="{{ 'plans.rooms.filter.seats.help'|trans }}" data-toggle="tooltip"></i>
                    </label>
                </div>
                {% for tag in tags %}
                    <div class="form-inline">
                        <input class="form-check-input" type="checkbox" id="check-tag-{{ tag.getId() }}" name="tag-{{ tag.getId() }}" value="true" {% if query.hasTag(tag) %} checked{% endif %} />

                        <label class="form-check-label" for="check-tag-{{ tag.getId() }}">
                            {{ tag.getName() }}{% if tag.hasValue() %}: {% endif %}

                            {% if tag.hasValue() %}
                                <input type="number" min="0" name="tag-{{ tag.getId() }}-value" class="form-control input-sm" value="{{ query.getValueOrDefault(tag) }}" data-enable="#check-tag-{{ tag.getId() }}" />
                            {% endif %}
                            {% if not tag.getDescription() is empty %}
                                <i class="fa fa-info-circle" title="{{ tag.getDescription() }}" data-toggle="tooltip"></i>
                            {% endif %}
                        </label>
                    </div>
                {% endfor %}

                <button type="submit" name="submit" value="" class="btn btn-primary btn-sm">
                    <i class="fa fa-search"></i> {{ 'actions.search'|trans }}
                </button>
            </form>
        </div>
    </div>

    {% for room in rooms %}
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">{{ room.name }}</h5>

                <p>
                    <strong>{{ 'plans.rooms.seats'|trans }}: </strong>
                    {{ room.seats }}
                </p>

                <p>
                    {% for tagInfo in room.tags %}
                        <span class="badge badge-secondary">
                            <i class="fa fa-check"></i> {{ tagInfo.tag.name }}{% if tagInfo.tag.hasValue %}: {{ tagInfo.value() }}{% endif %}
                        </span>
                    {% endfor %}
                </p>

                {% if room.description is not empty %}
                    <hr />

                    <p>
                        {{ room.description }}
                    </p>
                {% endif %}

                <a href="{{ path('timetable', { room: room.id }) }}" class="btn btn-outline-primary btn-sm">
                    {{ 'plans.rooms.timetable'|trans }}
                </a>
            </div>
        </div>
    {% endfor %}
{% endblock %}